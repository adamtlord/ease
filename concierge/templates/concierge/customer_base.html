{% extends 'base_app.html' %}
{% load custom_tags %}

{% url 'customer_detail' as customer_detail_url %}
{% if customer %}
    {% block title %}Customer {{ customer }}{% endblock %}
{% endif %}
{% block content %}
<div class="page-header customer">
    <div class="row">
        <div class="col-sm-6">
            <h1>{{ customer }}{% if customer.known_as %} <small>"{{ customer.known_as }}"</small>{% endif %}</h1>

        </div>
        <div class="col-sm-6">
            <div class="clearfix">
                <ul class="nav nav-pills">
                    <li role="presentation" class="start-ride-btn{% if not customer.ready_to_ride %} disabled{% endif %}"><a href="{% url 'ride_start' customer.id %}">Start Ride</a></li>
                    <li role="presentation" class="{% if profile_page %}active{% endif %}"><a href="{% url 'customer_detail' customer.id %}">Profile</a></li>
                    <li role="presentation" class="{% if history_page %}active{% endif %}"><a href="{% url 'customer_history' customer.id %}">History</a></li>
                    <li role="presentation" class="{% if destinations_page %}active{% endif %}"><a href="{% url 'customer_destinations' customer.id %}">Destinations</a></li>
                    <li role="presentation" class="{% if update_page %}active{% endif %}"><a href="{% url 'customer_update' customer.id %}">Edit</a></li>
                </ul>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-6">
            {% if customer.plan %}
                <span class="label plan-label {{ customer.plan.name|lower }}">{{ customer.plan }} Plan</span>
            {% else %}
                <span class="label label-danger">No Plan Selected</span>
            {% endif %}
            {% if customer.subscription_account %}
            {{ customer.rides_this_month|default:'No' }} ride{% if customer.rides_this_month != 1 %}s{% endif %}
             this month{% if customer.included_rides_this_month %},
             {{ customer.included_rides_this_month|length }} included{% endif %}{% if customer.plan.included_rides_per_month %},
             {{ customer.plan.included_rides_per_month }} remaining
             {% endif %}
            {% endif %}
        </div>
        <div class="col-sm-6 text-right">
            {% if customer.user.profile.on_behalf %}
                Account managed by <strong>{{ customer.user}}</strong> {% if customer.user.profile.relationship %}({{ customer.user.profile.relationship }}){% endif %}
            {% endif %}
        </div>
    </div>
</div>
{% block customer_content %}
{% endblock customer_content %}
{% endblock content %}