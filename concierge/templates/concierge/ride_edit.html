{% extends 'concierge/customer_base.html' %}
{% load custom_tags %}
{% load map_tags %}
{% block title %}{{ customer }}{% endblock title %}
{% block customer_content %}
{% if to_from_home %}
    <div class="well well-sm">
        Residence Type: {{ customer.get_residence_type_display }}<br>
        Residence Instructions: {{ customer.residence_instructions|default:'None' }}
    </div>
{% endif %}
<h3>Ride ID: {{ ride.id }}</h3>
<form action="" class="form" method="POST" novalidate>{% csrf_token %}
    {% if errors %}
        <p class="alert alert-danger">
            {% if error_count == 1 %}
                Please correct the error below.
            {% else %}
                Please correct the errors below.
            {% endif %}
        </p>
    {% endif %}
    <div class="row">
        <div class="col-sm-6">
            <div class="form-group">
                <label>Starting point</label>
                <div class="input-group">
                    <input id="starting_point" class="form-control" value="{{ ride.start.fulladdress }}">
                    <span class="input-group-btn" data-toggle="tooltip" title="Copied!">
                        <button type="button" class="btn btn-default copybtn" data-clipboard-target="#starting_point">
                            <i class="fa fa-clipboard"></i>
                        </button>
                    </span>
                </div>
                {% if form.start.errors %}
                    {{ form.start.errors }}
                {% endif %}
            </div>
            {{ form.start.as_hidden }}
            <div class="form-group datetime-start">
                <label>Start date<span class="req">*</span></label>
                <input class="form-control" type="text" value="{{ ride.start_date|date:'m/d/Y g:i A' }}">
                {% if form.start_date.errors %}
                    {{ form.start_date.errors }}
                {% endif %}
            </div>
            {{ form.start_date.as_hidden }}
            {% render_form_field form.cost %}
            {% render_form_field form.service %}
            {% render_form_field form.customer %}
            {% render_form_field form.notes %}
            {% render_form_field form.complete %}
        </div>
        <div class="col-sm-6">
            <div class="form-group">
                <label>Destination</label>
                <div class="input-group">
                    <input id="destination" class="form-control" value="{{ ride.destination.fulladdress }}">
                    <span class="input-group-btn" data-toggle="tooltip" title="Copied!">
                        <button type="button" class="btn btn-default copybtn" data-clipboard-target="#destination">
                            <i class="fa fa-clipboard"></i>
                        </button>
                    </span>
                </div>
                {% if form.destination.errors %}
                    {{ form.destination.errors }}
                {% endif %}
            </div>
            {{ form.destination.as_hidden }}
            {{ form.end_date.as_hidden }}
            {% render_form_field form.distance %}
            {% render_form_field form.fare_estimate %}
            {% if customer.notes %}
                <div class="well well-sm">
                    <i class="fa fa-comment fa-lg"></i> {{ customer.notes }}
                </div>
            {% endif %}
            {% if customer.special_assistance %}
                <p class="alert alert-warning"><i class="fa fa-wheelchair fa-lg"></i> {{ customer.special_assistance }}</p>
            {% endif %}
            {% if customer.residence_instructions %}
                <p class="alert alert-info">
                    <i class="fa fa-home fa-lg"></i>
                    {% if customer.residence_type %}
                        <small>({{ customer.get_residence_type_display }})</small><br>
                    {% endif %}
                    {{ customer.residence_instructions }}
                </p>
            {% endif %}
        </div>
    </div>

    <div class="form-actions">
        <input type="submit" class="btn btn-primary btn-block" value="Save Ride" />
    </div>
</form>
{% endblock %}

{% block scripts %}
<script src="{{ STATIC_URL }}js/lib/clipboard.min.js"></script>
<script src="{{ STATIC_URL }}js/lib/bootstrap-datetimepicker.min.js"></script>
<script src="{{ STATIC_URL }}js/lib/select2.min.js"></script>
<script src="{{ STATIC_URL }}js/apps/ride_edit.js"></script>
{% endblock %}