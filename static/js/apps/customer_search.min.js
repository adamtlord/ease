$(function(){function e(e){window.location.href="/concierge/customers/"+e}var n=new Bloodhound({datumTokenizer:function(e){for(var n=e.tokens,r=[],t=0;t<n.length;t++)if(/[-\s]/.test(n[t])){r.push(n[t]),/-/.test(n[t])&&r.push(n[t].replace(/[-]/g,""));for(var o=n[t].split(/[-\s]/),s=0;s<o.length;s++)r.push(o[s])}else r.push(n[t]);return r},queryTokenizer:function(e){return e.split(/[-\s]/)},identify:function(e){return e.id},prefetch:{url:"/concierge/customers/search",cache:!1,transform:function(e){return e.customers}}}),r={hint:!0,minLength:2};$("#customer_search .typeahead").typeahead(r,{display:function(e){var n=e.mobile_phone?" "+e.mobile_phone+" (M) ":"",r=e.user?" | Account: "+e.user:"",t=e.riders.length?" | Riders: "+e.riders.join(", "):"";return e.name+" "+e.home_phone+" (H) "+n+r+t},name:"customers",source:n}).on("typeahead:select",function(n,r){e(r.id)}).on("keypress",function(e){13===e.keyCode&&$("#customer_search .tt-suggestion:first-child").trigger("click")})});