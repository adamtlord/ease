$(function(){function e(e){"OTHER"===e?$("#source_other").slideDown():$("#source_other").slideUp()}function i(e){"1"===e||"2"===e?$("#lovedone_fields").slideDown():$("#lovedone_fields").slideUp()}function t(e){var i={"#id_reg-email":"#id_cust-email","#id_reg-first_name":"#id_cust-first_name","#id_reg-last_name":"#id_cust-last_name"};if(e){for(var t in i)$(t).val($(i[t]).val());$("#id_reg-relationship").val("self")}else{for(var a in i)$(a).val("");$("#id_reg-relationship").val("")}}function a(e,i){var t=$(e).clone(!0),a=$("#id_"+i+"-TOTAL_FORMS").val();t.find(":input").each(function(){var e=$(this).attr("name").replace("-"+(a-1)+"-","-"+a+"-"),i="id_"+e;$(this).attr({name:e,id:i}).val("").removeAttr("checked")}),t.find("label").each(function(){var e=$(this).attr("for").replace("-"+(a-1)+"-","-"+a+"-");$(this).attr("for",e)}),a++,$("#id_"+i+"-TOTAL_FORMS").val(a),$(e).after(t)}function s(e){var i=e.val(),t=e.parent(),a=$("#pswd_length"),s=$("#pswd_dynamic"),r=!1,n=e.data("remote"),l=function(){a.removeClass("invalid valid"),t.removeClass("valid"),s.removeClass("invalid").html("")};i.length>0?(i.length<8?(a.removeClass("valid").addClass("invalid"),t.removeClass("valid")):(a.removeClass("invalid").addClass("valid"),t.removeClass("has-error"),r=!0),r?$.get(n,{pswd:i},function(e){e.valid?(s.removeClass("invalid").html(""),t.addClass("valid"),t.removeClass("has-error")):(s.addClass("invalid").html(e.errors.join("<br>")),t.removeClass("valid"))}):s.removeClass("invalid").html("")):l()}function r(e){var i=e.val(),t=e.parent(),a=$("#pswd_match_error"),s=function(){t.removeClass("has-error").addClass("valid"),a.removeClass("errorlist").text("")},r=function(){t.removeClass("valid").addClass("has-error"),a.addClass("errorlist").text("Passwords don't match")},n=function(){t.removeClass("valid has-error"),a.removeClass("errorlist").text("")};i.length>0?i===$("#id_reg-password1").val()?s():r():n()}$("#id_reg-source").on("change",function(){e(this.value)}),$("#id_send_updates").on("change",function(){i(this.value)}),$("#add_destination_fields").click(function(e){e.preventDefault(),a("fieldset.destination:last","destination")}),$("#add_lovedone_fields").click(function(e){e.preventDefault(),$("fieldset.lovedone").is(":visible")?a("fieldset.lovedone:last","lovedone"):$("fieldset.lovedone").slideDown()}),$("#add_rider_fields").click(function(e){e.preventDefault(),$("fieldset.rider").is(":visible")?a("fieldset.rider:last","rider"):$("fieldset.rider").slideDown()}),$("#use_customer_info").change(function(){t($(this).is(":checked"))}),$("#id_reg-password1").keyup(function(){s($(this))}),$("#id_reg-password2").keyup(function(){r($(this))}),$(".btn.deactivate").on("click",function(){return confirm("Are you sure you want to deactivate this customer? If the customer has an active subscription, you must separately cancel it in Stripe.")}),$(".btn.reactivate").on("click",function(){return confirm("Are you sure you want to re-activate this customer? Please remember to restart the customer's subscription in Stripe if necessary.")}),e($("#id_reg-source option:selected").val()),i($("#id_send_updates option:selected").val()),$(".phone-mask input").mask("000-000-0000"),$(".zip-mask input").mask("00000-0000"),$(".date-mask input").mask("00/00/0000"),$(".datepicker input").length&&$(".datepicker input").datetimepicker({autoclose:!0,fontAwesome:!0,format:"yyyy-mm-dd",startView:2,minView:2,todayHighlight:!0,weekStart:0})});