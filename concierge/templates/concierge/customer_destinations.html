{% extends 'concierge/customer_base.html' %}
{% load custom_tags %}
{% load map_tags %}
{% block title %}Update Customer {{ customer }}{% endblock title %}
{% block customer_content %}

<table class="table table-striped table-fixed">
    <thead>
        <tr>
            <th>Name</th>
            <th>Address</th>
            <th>Notes</th>
            <th>Map</th>
            <th>Actions</th>
        </tr>
    </thead>
    <tbody>
    {% with customer.home as destination %}
        <tr>
            <td>{{ destination.fullname }}</td>
            <td>
                {% if destination.street1 %}
                    {{ destination.street1 }}<br>
                {% endif %}
                {% if destination.street2 %}
                    {{ destination.street2 }}<br>
                {% endif %}
                {{ destination.city }},
                {{ destination.state }}
                {{ destination.zip_code }}
            </td>
            <td><em class="small">{{ customer.residence_instructions|default:'' }}</em></td>
            <td>
                {% static_map destination %}
            </td>
            <td>
                <a href="{% url 'customer_destination_edit' customer.id destination.id %}" class="btn btn-default btn-sm">Edit</a>
            </td>
        </tr>
    {% endwith %}
    {% for destination in customer.destinations %}
        <tr>
            <td>{{ destination.fullname }}</td>
            <td>
                {% if destination.street1 %}
                    {{ destination.street1 }}<br>
                {% endif %}
                {% if destination.street2 %}
                    {{ destination.street2 }}<br>
                {% endif %}
                {{ destination.city }},
                {{ destination.state }}
                {{ destination.zip_code }}
            </td>
            <td><em class="small">{{ destination.notes|default:'' }}</em></td>
            <td>
                {% static_map destination %}
            </td>
            <td>
                <a href="{% url 'customer_destination_edit' customer.id destination.id %}" class="btn btn-default btn-sm">Edit</a>
                <a href="{% url 'customer_destination_delete' customer.id destination.id %}" class="btn btn-danger btn-sm">Delete</a>
            </td>
        </tr>
    {% endfor %}
    </tbody>
</table>
<p><a href="{% url 'customer_destination_add' customer.id %}" class="btn btn-primary">Add a Destination</a></p>
{% endblock %}