$(function(){function e(e){"OTHER"===e?$("#source_other").slideDown():$("#source_other").slideUp()}function i(e){"1"===e||"2"===e?$("#lovedone_fields").slideDown():$("#lovedone_fields").slideUp()}function a(e){var i={"#id_reg-email":"#id_cust-email","#id_reg-first_name":"#id_cust-first_name","#id_reg-last_name":"#id_cust-last_name"};if(e){for(var a in i)$(a).val($(i[a]).val());$("#id_reg-relationship").val("self")}else{for(var s in i)$(s).val("");$("#id_reg-relationship").val("")}}function s(e,i){var a=$(e).clone(!0),s=$("#id_"+i+"-TOTAL_FORMS").val();a.find(":input").each(function(){var e=$(this).attr("name").replace("-"+(s-1)+"-","-"+s+"-"),i="id_"+e;$(this).attr({name:e,id:i}).val("").removeAttr("checked")}),a.find("label").each(function(){var e=$(this).attr("for").replace("-"+(s-1)+"-","-"+s+"-");$(this).attr("for",e)}),s++,$("#id_"+i+"-TOTAL_FORMS").val(s),$(e).after(a)}function t(e){var i=e.val(),a=e.parent(),s=$("#pswd_length"),t=$("#pswd_dynamic"),l=!1,d=e.data("remote"),n=function(){s.removeClass("invalid valid"),a.removeClass("valid"),t.removeClass("invalid").html("")};i.length>0?(i.length<8?(s.removeClass("valid").addClass("invalid"),a.removeClass("valid")):(s.removeClass("invalid").addClass("valid"),l=!0),l?$.get(d,{pswd:i},function(e){e.valid?(t.removeClass("invalid").html(""),a.addClass("valid")):(t.addClass("invalid").html(e.errors.join("<br>")),a.removeClass("valid"))}):t.removeClass("invalid").html("")):n()}function l(e){var i=e.val(),a=e.parent(),s=$("#pswd_match_error"),t=function(){a.removeClass("has-error").addClass("valid"),s.removeClass("errorlist").text("")},l=function(){a.removeClass("valid").addClass("has-error"),s.addClass("errorlist").text("Passwords don't match")},d=function(){a.removeClass("valid has-error"),s.removeClass("errorlist").text("")};i.length>0?i===$("#id_reg-password1").val()?t():l():d()}$("#id_reg-source").on("change",function(){e(this.value)}),$("#id_send_updates").on("change",function(){i(this.value)}),$("#add_destination_fields").click(function(e){e.preventDefault(),s("fieldset.destination:last","destination")}),$("#add_lovedone_fields").click(function(e){e.preventDefault(),$("fieldset.lovedone").is(":visible")?s("fieldset.lovedone:last","lovedone"):$("fieldset.lovedone").slideDown()}),$("#add_rider_fields").click(function(e){e.preventDefault(),$("fieldset.rider").is(":visible")?s("fieldset.rider:last","rider"):$("fieldset.rider").slideDown()}),$("#use_customer_info").change(function(){a($(this).is(":checked"))}),$("#id_reg-password1").keyup(function(){t($(this))}),$("#id_reg-password2").keyup(function(){l($(this))}),e($("#id_reg-source option:selected").val()),i($("#id_send_updates option:selected").val()),$(".phone-mask input").mask("000-000-0000"),$(".zip-mask input").mask("00000-0000"),$(".date-mask input").mask("0000-00-00"),$(".datepicker input").datetimepicker({autoclose:!0,fontAwesome:!0,format:"yyyy-mm-dd",startView:2,minView:2,todayHighlight:!0,weekStart:1})});