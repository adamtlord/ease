$(function(){function t(t,e){$("input.customer_"+e).prop("checked",t)}function e(t){$('input.customer, input[name="ride"]').prop("checked",t),n()}function c(){var t=$(".master");$('input[class^="customer_"]:checked').length===$('input[class^="customer_"]').length?t.prop("checked",!0):t.prop("checked",!1),n()}function n(){$('input[class^="customer_"]:checked').length>0?$('input[type="submit"]').removeAttr("disabled"):$('input[type="submit"]').attr("disabled","disabled")}$("tr").on("click",function(t){$(t.target).is("input")||$(t.target).is(".btn")||$(this).find("input").click()}),$("input.customer").on("change",function(){t(this.checked,$(this).data("customer")),c()}),$('input[class^="customer_"]').on("change",function(){var t="."+$(this).attr("class"),e=$(this).data("parent"),n=$("[data-customer='"+e+"']");$(t+":checked").length===$(t).length?n.prop("checked",!0).trigger("change"):0===$(t+":checked").length&&n.prop("checked",!1).trigger("change"),c()}),$(".master").on("change",function(){e(this.checked)}),$("#bill_rides").on("submit",function(){var t=$('input[class^="customer_"]:checked').length,e=t>1?"rides":"ride";return!!window.confirm("Are you sure you want to create and send invoices for "+t+" "+e+"?")})});