$(function(){function e(e,t){$("input.customer_"+t).prop("checked",e)}function t(e){$('input.customer, input[name="ride"]').prop("checked",e),n()}function c(){var e=$(".master");$('input[class^="customer_"]:checked').length===$('input[class^="customer_"]').length?e.prop("checked",!0):0===$('input[class^="customer_"]:checked').length&&e.prop("checked",!1),n()}function n(){$('input[class^="customer_"]:checked').length>0?$('input[type="submit"]').removeAttr("disabled"):$('input[type="submit"]').attr("disabled","disabled")}$("tr").on("click",function(e){$(e.target).is("input")||$(this).find("input").click()}),$("input.customer").on("change",function(){e(this.checked,$(this).data("customer")),c()}),$('input[class^="customer_"]').on("change",function(){var e="."+$(this).attr("class"),t=$(this).data("parent"),n=$("[data-customer='"+t+"']");$(e+":checked").length===$(e).length?n.prop("checked",!0).trigger("change"):0===$(e+":checked").length&&n.prop("checked",!1).trigger("change"),c()}),$(".master").on("change",function(){t(this.checked)}),$("#bill_rides").on("submit",function(){var e=$('input[class^="customer_"]:checked').length,t=e>1?"rides":"ride";return!!window.confirm("Are you sure you want to create and send invoices for "+e+" "+t+"?")})});